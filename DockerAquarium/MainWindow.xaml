<Window x:Class="DockerAquarium.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:behaviors="clr-namespace:DockerAquarium.Presentation.Behaviors"
        mc:Ignorable="d"
        Title="Docker Aquarium - Container Visualization" 
        Height="700" Width="1200"
        WindowStartupLocation="CenterScreen"
        Background="#1a1a2e">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Control Panel -->
        <Border Grid.Row="0" Background="#16213e" Padding="15">
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                <Button Command="{Binding StartCommand}" Padding="10,5" Foreground="White" Background="#0f3460" Content="Start Monitoring" IsEnabled="{Binding IsMonitoring, Converter={StaticResource NotBoolConverter}}" Margin="0,0,10,0"/>
                <Button Command="{Binding StopCommand}" Padding="10,5" Foreground="White" Background="#e94560" Content="Stop Monitoring" IsEnabled="{Binding IsMonitoring}" Margin="0,0,10,0"/>
                <Button Command="{Binding RefreshCommand}" Padding="10,5" Foreground="White" Background="#0f3460" Content="Refresh Containers" Margin="0,0,20,0"/>
                <TextBlock Foreground="White" VerticalAlignment="Center">
                    <Run Text="Status: "/>
                    <Run Text="{Binding IsMonitoring, Mode=OneWay, StringFormat='Monitoring: {0}'}" Foreground="#00ff88"/>
                </TextBlock>
            </StackPanel>
        </Border>

        <!-- Aquarium Canvas -->
        <Canvas x:Name="AquariumCanvas" Grid.Row="1" Background="#0a0e27" Width="{Binding AquariumWidth}" Height="{Binding AquariumHeight}" HorizontalAlignment="Center" VerticalAlignment="Center">
            <ItemsControl ItemsSource="{Binding Fish}" IsHitTestVisible="True">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <Canvas/>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.ItemContainerStyle>
                    <Style TargetType="ContentPresenter">
                        <Setter Property="Canvas.Left" Value="{Binding PositionX}"/>
                        <Setter Property="Canvas.Top" Value="{Binding PositionY}"/>
                    </Style>
                </ItemsControl.ItemContainerStyle>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border Width="{Binding Size}" Height="{Binding Size}" Background="Transparent" behaviors:ToolTipDataContextBehavior.BindTooltipDataContext="True" ToolTipService.InitialShowDelay="0" ToolTipService.ShowDuration="30000">
                            <Border.ToolTip>
                                <ToolTip Background="#16213e" Foreground="White" Padding="12" BorderThickness="1" BorderBrush="#0f3460" HasDropShadow="True">
                                    <StackPanel>
                                        <TextBlock FontWeight="Bold" FontSize="13" Margin="0,0,0,8" Text="{Binding ContainerName}"/>
                                        <StackPanel Margin="0,0,0,8">
                                            <StackPanel Orientation="Horizontal" Margin="0,0,0,0">
                                                <TextBlock FontSize="10" Foreground="#aaaaaa" Text="Image: "/>
                                                <TextBlock FontSize="10" Foreground="#00ff88" Text="{Binding ImageName}"/>
                                            </StackPanel>
                                            <StackPanel Orientation="Horizontal" Margin="0,3,0,0">
                                                <TextBlock FontSize="10" Foreground="#aaaaaa" Text="ID: "/>
                                                <TextBlock FontSize="10" Foreground="#00ccff" Text="{Binding ContainerId}"/>
                                            </StackPanel>
                                        </StackPanel>
                                        <Separator Background="#0f3460" Margin="-12,5,-12,5"/>
                                        <StackPanel Margin="0,5,0,0">
                                            <StackPanel Orientation="Horizontal">
                                                <TextBlock FontSize="10" Foreground="#aaaaaa" Text="Status: "/>
                                                <TextBlock FontSize="10" Foreground="#ffc800" Text="{Binding State}"/>
                                            </StackPanel>
                                            <StackPanel Orientation="Horizontal" Margin="0,3,0,0">
                                                <TextBlock FontSize="10" Foreground="#aaaaaa" Text="Health: "/>
                                                <TextBlock FontSize="10" Foreground="#00ff88" Text="{Binding HealthStatus}"/>
                                            </StackPanel>
                                        </StackPanel>
                                        <Separator Background="#0f3460" Margin="-12,5,-12,5"/>
                                        <StackPanel Margin="0,5,0,0">
                                            <StackPanel Orientation="Horizontal">
                                                <TextBlock FontSize="10" Foreground="#aaaaaa" Text="CPU: "/>
                                                <TextBlock FontSize="10" Foreground="#ff6b6b" Text="{Binding CpuPercentage, StringFormat=N1}"/>
                                                <TextBlock FontSize="10" Foreground="#ff6b6b" Text="%"/>
                                            </StackPanel>
                                            <StackPanel Orientation="Horizontal" Margin="0,3,0,0">
                                                <TextBlock FontSize="10" Foreground="#aaaaaa" Text="Memory: "/>
                                                <TextBlock FontSize="10" Foreground="#4ecdc4" Text="{Binding MemoryPercentage, StringFormat=N1}"/>
                                                <TextBlock FontSize="10" Foreground="#4ecdc4" Text="%"/>
                                            </StackPanel>
                                        </StackPanel>
                                    </StackPanel>
                                </ToolTip>
                            </Border.ToolTip>
                            <Ellipse Fill="{Binding FishColor, Converter={StaticResource ColorToBrushConverter}}" StrokeThickness="2" Stroke="#ffffff" Opacity="0.85"/>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </Canvas>

        <!-- Status Bar -->
        <Border Grid.Row="2" Background="#16213e" Padding="15" BorderThickness="0,1,0,0" BorderBrush="#0f3460">
            <StackPanel Orientation="Horizontal">
                <TextBlock Foreground="#00ff88" FontSize="12" Margin="0,0,20,0">
                    <Run Text="Containers: "/>
                    <Run Text="{Binding Fish.Count, Mode=OneWay}"/>
                </TextBlock>
                <TextBlock Foreground="#00ff88" FontSize="12" Margin="0,0,20,0">
                    <Run Text="Fish Color Legend:"/>
                </TextBlock>
                <StackPanel Orientation="Horizontal">
                    <StackPanel Orientation="Horizontal" Margin="0,0,15,0">
                        <Ellipse Width="12" Height="12" Fill="#00c864" Margin="0,0,5,0"/>
                        <TextBlock Foreground="White" FontSize="11" Text="Healthy"/>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" Margin="0,0,15,0">
                        <Ellipse Width="12" Height="12" Fill="#ffc800" Margin="0,0,5,0"/>
                        <TextBlock Foreground="White" FontSize="11" Text="Warning"/>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" Margin="0,0,15,0">
                        <Ellipse Width="12" Height="12" Fill="#ff3232" Margin="0,0,5,0"/>
                        <TextBlock Foreground="White" FontSize="11" Text="Critical"/>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal">
                        <Ellipse Width="12" Height="12" Fill="#969696" Margin="0,0,5,0"/>
                        <TextBlock Foreground="White" FontSize="11" Text="Stopped"/>
                    </StackPanel>
                </StackPanel>
            </StackPanel>
        </Border>
    </Grid>
</Window>

